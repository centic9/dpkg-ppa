.\" dpkg manual page - dpkg-buildpackage(1)
.\"
.\" Copyright Â© 1995-1996 Ian Jackson
.\" Copyright Â© 2000 Wichert Akkerman <wakkerma@debian.org>
.\" Copyright Â© 2007-2008 Frank Lichtenheld <djpig@debian.org>
.\" Copyright Â© 2008-2013 Guillem Jover <guillem@debian.org>
.\" Copyright Â© 2008-2012 RaphaÃ«l Hertzog <hertzog@debian.org>
.\"
.\" This is free software; you can redistribute it and/or modify
.\" it under the terms of the GNU General Public License as published by
.\" the Free Software Foundation; either version 2 of the License, or
.\" (at your option) any later version.
.\"
.\" This is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public License
.\" along with this program.  If not, see <https://www.gnu.org/licenses/>.
.
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH dpkg\-buildpackage 1 2013\-12\-12 Debianprojektet dpkg\-verktygen
.SH NAMN
dpkg\-buildpackage \- bygg binär\- eller källkodspaket från källkod
.
.SH SYNOPS
\fBdpkg\-buildpackage\fP [\fIflagga\fP...]
.
.SH BESKRIVNING
\fBdpkg\-buildprogram\fP är ett program som automatiserar processen med att
bygga ett Debianpaket. Det består av följande steg:
.IP \fB1.\fP 3
Byggmiljön förbereds genom att diverse miljövariabler sätts (se \fBMILJÖ\fP)
och anropar \fBdpkg\-source \-\-before\-build\fP (såvida inte \fB_T\fP eller
\fB\-\-target\fP används).
.IP \fB2.\fP 3
Byggberoenden och \-konflikter kontrolleras att de uppfylls (såvida inte
\fB\-d\fP anges).
.IP \fB3.\fP 3
Om ett specifikt mål har valts med flaggan \fB\-T\fP eller \fB\-\-target\fP anropas
det målet, varpå programmet avslutas. I annat fall anropas \fBfakeroot
debian/rules clean\fP för att städa byggträdet (såvida inte \fB\-nc\fP anges).
.IP \fB4.\fP 3
\fBdpkg\-source \-b\fP anropas för att skapa källkodspaketet (såvida inte ett
bygge av enbart binärer har valts med \fB\-b\fP, \fB\-B\fP eller \fB\-A\fP).
.IP \fB5.\fP 3
\fBdebian/rules\fP \fIbyggmål\fP anropas, följt av \fBfakeroot debian/rules\fP
\fIbinärmål\fP (såvida inte ett bygge av enbart källkod har valts med
\fB\-S\fP). Observera att \fIbyggmål\fP och \fIbinärmål\fP är ett av \fBbuild\fP och
\fBbinary\fP (standardval, eller om \fB\-b\fP anges), \fBbuild\-arch\fP och
\fBbinary\-arch\fP (om \fB\-B\fP anges) eller \fBbuild\-indep\fP och \fBbinary\-indep\fP (om
\fB\-A\fP anges).
.IP \fB6.\fP 3
It calls \fBgpg2\fP or \fBgpg\fP to sign the \fB.dsc\fP file (if any, unless \fB\-us\fP
is specified or on UNRELEASED builds).
.IP \fB7.\fP 3
\fBdpkg\-genchanges\fP anropas för att skapa en \fB.changes\fP\-fil. Många av
flaggorna till \fBdpkg\-buildpackage\fP vidaresänds till \fBdpkg\-genchanges\fP.
.IP \fB8.\fP 3
It calls \fBgpg2\fP or \fBgpg\fP to sign the \fB.changes\fP file (unless \fB\-uc\fP is
specified or on UNRELEASED builds).
.IP \fB9.\fP 3
Om \fB\-tc\fP anges anropas \fBfakeroot debian/rules clean\fP ytterligare en
gång. Till slut anropas \fBdpkg\-source \-\-after\-build\fP.
.
.SH FLAGGOR
.TP 
\fB\-b\fP
Anger att enbart binära paket skall byggas, inga källkodsfiler byggs
och/eller distribueras. Sänds vidare till \fBdpkg\-genchanges\fP.
.TP 
\fB\-B\fP
Anger att enbart binära paket skall byggas, begränsat till
arkitekturberoende paket. Sänds vidare till \fBdpkg\-genchanges\fP.
.TP 
\fB\-A\fP
Anger att enbart binära paket skall byggas, begränsat till
arkitekturoberoende paket. Sänds vidare till \fBdpkg\-genchanges\fP.
.TP 
\fB\-S\fP
Anger att enbart källkodspaket skall byggas, inga binärpaket behöver
byggas. Sänds vidare till \fBdpkg\-genchanges\fP.
.TP 
\fB\-F\fP
Anger att ett normalt komplett bygge, binär\- och källkodspaket, skall
byggas. Detta är detsamma som standardläget om inga byggflaggor anges.
.TP 
\fB\-\-target=\fP\fImål\fP
.TQ
\fB\-\-target \fP\fImål\fP
.TQ
\fB\-T\fP\fImål\fP
Anropar \fBdebian/rules\fP \fImål\fP efter att ha konfigurerat byggmiljön, och
avbryter byggprocessen efteråt. Om \fB\-\-as\-root\fP också anges körs kommandot
som root (se \fB\-r\fP). Observera att officiella mål som måste köras som root
inte behöver flaggan.
.TP 
\fB\-\-as\-root\fP
Endast meningsfull tillsammans med \fB\-\-target\fP. Kräver att målet körs med
root\-behörighet.
.TP 
\fB\-si\fP
.TQ
\fB\-sa\fP
.TQ
\fB\-sd\fP
.TQ
\fB\-v\fP\fIversion\fP
.TQ
\fB\-C\fP\fIändringsbeskrivning\fP
.TQ
\fB\-m\fP\fIpaketansvarige\-adress\fP
.TQ
\fB\-e\fP\fIpaketansvarige\-adress\fP
Sänds vidare utan ändringar till \fBdpkg\-genchanges\fP. Se dess manualsida.
.TP 
\fB\-a\fP\fIarkitektur\fP
Ange Debianarkitekturen vi bygger för. Arkitekturen för maskinen vi bygger
på bestäms automatiskt, och är även standard för värdmaskinen.
.TP 
\fB\-t\fP\fIgnu\-systemtyp\fP
Ange GNU\-systemtyp vi bygger för. Den kan användas i stället för \-a eller
som ett komplement för att överstyra standard\-GNU\-systemtypen för
Debian\-målarkitekturen.
.TP 
\fB\-P\fP\fIprofile\fP[\fB,\fP...]
Specify the profile(s) we build, as a comma\-separated list, without the
"\fBprofile.\fP" namespace prefix. The default behavior is to build for no
specific profile. Also adds them (as a space separated list) to the
\fBDEB_BUILD_PROFILES\fP environment variable which allows, for example,
\fBdebian/rules\fP files to use this information for conditional builds.
.TP 
\fB\-j\fP\fIjobb\fP
Number of jobs allowed to be run simultaneously, equivalent to the
\fBmake\fP(1)  option of the same name. Will add itself to the \fBMAKEFLAGS\fP
environment variable, which should cause all subsequent make invocations to
inherit the option. Also adds \fBparallel=\fP\fIjobs\fP to the
\fBDEB_BUILD_OPTIONS\fP environment variable which allows debian/rules files to
use this information for their own purposes.  The \fBparallel=\fP\fIjobs\fP in
\fBDEB_BUILD_OPTIONS\fP environment variable will override the \fB\-j\fP value if
this option is given.
.TP 
\fB\-D\fP
Kontrollera  byggberoenden och \-konflikter; avbryt om de inte
uppfylls. Detta är standardbeteendet.
.TP 
\fB\-d\fP
Kontrollera inte byggberoenden eller \-konflikter.
.TP 
\fB\-nc\fP
Städa inte upp byggträdet (implicerar \fB\-b\fP om inget annat har valts bland
\fB\-B\fP, \fB\-A\fP eller \fB\-S\fP).
.TP 
\fB\-tc\fP
Städa källkodsträdet (använder \fIfå\-root\-kommando\fP \fBdebian/rules clean\fP)
efter att paketet har byggts.
.TP 
\fB\-r\fP\fIfå\-root\-kommando\fP
När \fBdpkg\-buildpackages\fP behöver exekvera delar av byggprocessen som root
sätter den kommandot som skall exekveras efter \fIfå\-root\-kommando\fP om ett
sådant har angivits. Om inte kommer \fBfakeroot\fP att användas som standard,
om kommandot existerar. \fIfå\-root\-kommando\fP måste börja med namnet på det
faktiska kommandot som skall anropas samt de parametrar det skall anropas
med. \fIfå\-root\-kommando\fP kan innehålla parametrar (de måste vara avdelade
med blanksteg) men inga skalmetatecken. \fIfå\-root\-kommando\fP kan typiskt vara
\fBfakeroot\fP, \fBsudo\fP, \fBsuper\fP eller \fBreally\fP. \fBsu\fP är inte lämpligt
eftersom det kräver flaggan \fB\-c\fP för att köra ett kommando och även då kan
det bara starta användarens skal med \fB\-c\fP istället för att sända flaggor
individuellt till kommandot som skall startas.
.TP 
\fB\-R\fP\fIregelfil\fP
För att bygga ett Debianpaket körs normalt kommandot \fBdebian/rules\fP med
flera olika standardparametrar. Den här flaggan gör det möjligt att använda
ett annat programanrop för att bygga paketet (det kan innehålla
blankstegsavdelade parametrar). Den kan även användas för att exekvera
standardregelfilen med ett annat make\-program (till exempel genom att
använda \fB/usr/local/bin/make \-f debian/rules\fP som \fIregelfil\fP).
.TP 
\fB\-p\fP\fIsigneringskommando\fP
When \fBdpkg\-buildpackage\fP needs to execute GPG to sign a source control
(\fB.dsc\fP) file or a \fB.changes\fP file it will run \fIsign\-command\fP (searching
the \fBPATH\fP if necessary) instead of \fBgpg2\fP or \fBgpg\fP. \fIsign\-command\fP will
get all the arguments that \fBgpg2\fP or \fBgpg\fP would have
gotten. \fIsign\-command\fP should not contain spaces or any other shell
metacharacters.
.TP 
\fB\-k\fP\fInyckel\-id\fP
Ange nyckel\-id att använda vid signering av paket.
.TP 
\fB\-us\fP
Signera inte källkodspaketet.
.TP 
\fB\-uc\fP
Signera inte \fB.changes\fP\-filen.
.TP 
\fB\-\-force\-sign\fP
Force the signing of the resulting files (since dpkg 1.17.0), regardless of
\fB\-us\fP or \fB\-uc\fP or other internal heuristics.
.TP 
\fB\-i\fP[\fIregex\fP]
.TQ
\fB\-I\fP[\fIpattern\fP]
.TQ
\fB\-s\fP[\fBnsAkurKUR\fP]
.TQ
\fB\-z\fP, \fB\-Z\fP
Sänds vidare utan ändringar till \fBdpkg\-source\fP. Se dess manualsida.
.TP 
\fB\-\-source\-option=\fP\fIval\fP
Sänd flaggan \fIval\fP till \fBdpkg\-source\fP.
.TP 
\fB\-\-changes\-option=\fP\fIval\fP
Sänder flaggan \fIval\fP till \fBdpkg\-genchanges\fP.
.TP 
\fB\-\-admindir=\fP\fIkat\fP
.TQ
\fB\-\-admindir\fP \fIkat\fP
Ändra platsen för \fBdpkg\fP\-databasen. Förval är \fI/var/lib/dpkg\fP.
.TP 
\fB\-?\fP, \fB\-\-help\fP
Visar hjälpskärm och avslutar.
.TP 
\fB\-\-version\fP
Visar version och avslutar.
.
.SH MILJÖVARIABLER
.TP 
\fBDEB_SIGN_KEYID\fP
If set, it will be used to sign the \fB.changes\fP and \fB.dsc\fP files.
Overridden by the \fB\-k\fP option.
.TP 
\fBDEB_BUILD_PROFILES\fP
If set, it will be used as the active build profile(s) for the package being
built. It is a space separated list of profile names, without the
"\fBprofile.\fP" namespace prefix. Overridden by the \fB\-P\fP option.

.SS "Reliance on exported environment flags"
Även om \fBdpkg\-buildpackage\fP exporterar några variabler bör inte
\fBdebian/rules\fP vara beroende av deras närvaro och bör istället använda
respektive gränssnitt för att hämta de värden som behövs.
.SS "Variabler som sätts av dpkg\-architecture"
\fBdpkg\-architecture\fP anropas med flaggorna \fB\-a\fP och \fB\-t\fP
vidaresända. Variabler som skrivs ut via dess \fB\-s\fP\-flagga integreras i
byggmiljön.
.
.SH ANTECKNINGAR
.SS "Kompileringsflaggor exporteras inte längre."
Between dpkg 1.14.17 and 1.16.1, \fBdpkg\-buildpackage\fP exported compiler
flags (\fBCFLAGS\fP, \fBCXXFLAGS\fP, \fBFFLAGS\fP, \fBCPPFLAGS\fP and \fBLDFLAGS\fP) with
values as returned by \fBdpkg\-buildflags\fP. This is no longer the case.
.SS "Default build targets"
\fBdpkg\-buildpackage\fP is using the \fBbuild\-arch\fP and \fBbuild\-indep\fP targets
since dpkg 1.16.2. Those targets are thus mandatory. But to avoid breakages
of existing packages, and ease the transition, it will fallback to using the
\fBbuild\fP target if \fBmake \-f debian/rules \-qn\fP \fIbuild\-target\fP returns 2 as
exit code.
.SH PROGRAMFEL
Det borde vara möjligt att ange blanksteg och skalmetatecken i, och
inledande argument för, \fIfå\-root\-kommando\fP och \fIsigneringskommando\fP.
.
.SH "SE ÄVEN"
.ad l
.nh
\fBdpkg\-source\fP(1), \fBdpkg\-architecture\fP(1), \fBdpkg\-buildflags\fP(1),
\fBdpkg\-genchanges\fP(1), \fBfakeroot\fP(1), \fBgpg2\fP(1), \fBgpg\fP(1).
.SH ÖVERSÄTTNING
Peter Krefting och Daniel Nylander.
